
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Getting Started Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" >
            
                <span>
            
                    
                    Development
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter active" data-level="1.2.1" data-path="getting_started.html">
            
                <a href="getting_started.html">
            
                    
                    Getting Started
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" >
            
                <span>
            
                    
                    Deployment
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="../deployment/habitat.html">
            
                <a href="../deployment/habitat.html">
            
                    
                    Deploy a Site with Chef Habitat
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="../deployment/docker.html">
            
                <a href="../deployment/docker.html">
            
                    
                    Deploy a Site with Docker
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" >
            
                <span>
            
                    
                    Guides
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="../guides/creating-a-dynamic-page.html">
            
                <a href="../guides/creating-a-dynamic-page.html">
            
                    
                    Creating a Dynamic Page
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="../guides/make-a-model-searchable-by-tags.html">
            
                <a href="../guides/make-a-model-searchable-by-tags.html">
            
                    
                    Make a Model Searchable by Tags
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="../guides/migrations.html">
            
                <a href="../guides/migrations.html">
            
                    
                    Migrations
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.4" data-path="../guides/skeletons-from-scratch.html">
            
                <a href="../guides/skeletons-from-scratch.html">
            
                    
                    Bootstrap a Site from Git
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5" data-path="../guides/translating-sites.html">
            
                <a href="../guides/translating-sites.html">
            
                    
                    Translating a Site into Multiple Languages
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.6" data-path="../guides/sending-email.html">
            
                <a href="../guides/sending-email.html">
            
                    
                    Sending Emails
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >Getting Started</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="getting-started-with-development">Getting Started with Development</h1>
<p>This guide shows you the minimal steps required run an emergence project locally, make changes to it, and see the result.</p>
<h2 id="in-this-article">In this article</h2>
<ul>
<li><a href="#introduction">Introduction</a></li>
<li><a href="#prerequisites">Prerequisites</a></li>
<li><a href="#clone-project-via-git">Clone Project via Git</a></li>
<li><a href="#launch-studio-via-habitat">Launch Studio via Habitat</a></li>
<li><a href="#start-runtime-and-build-project">Start Runtime and Build Project</a></li>
<li><a href="#load-fixture-data-optional">Load Fixture Data (optional)</a></li>
<li><a href="#create-user-account-optional">Create User Account (optional)</a></li>
<li><a href="#running-tests">Running Tests</a></li>
</ul>
<h2 id="introduction">Introduction</h2>
<h2 id="prerequisites">Prerequisites</h2>
<p>Before you begin, you&apos;ll need Docker and Habitat set up on your workstation:</p>
<ol>
<li><p><strong>Install Docker</strong></p>
<p> On Mac and Windows workstations, Docker must be installed to use habitat. On Linux, Docker is optional.</p>
<ul>
<li><a href="https://store.docker.com/editions/community/docker-ce-desktop-mac" target="_blank">Download <em>Docker for Mac</em></a></li>
<li><a href="https://store.docker.com/editions/community/docker-ce-desktop-windows" target="_blank">Download <em>Docker for Windows</em></a></li>
<li><a href="https://docs.docker.com/install/linux/docker-ce/ubuntu/" target="_blank">Install Docker on Ubuntu</a></li>
</ul>
</li>
<li><p><strong>Install Chef Habitat on your system</strong></p>
<p> Chef Habitat is a tool for automating all the build and runtime workflows for applications, in a way that behaves consistently across time and environments. An application automated with Habitat can be run on any operating system, connected to other applications running locally or remotely, and deployed to either a container, virtual machine, or bare-metal system.</p>
<p> Installing Habitat only adds one binary to your system, <code>hab</code>, and initializes the <code>/hab</code> tree.</p>
<pre><code class="lang-bash"> curl <span class="hljs-_">-s</span> https://raw.githubusercontent.com/habitat-sh/habitat/master/components/hab/install.sh | sudo bash
 hab --version <span class="hljs-comment"># should report 0.85.0 or newer</span>
</code></pre>
</li>
<li><p><strong>Configure the <code>hab</code> client for your user</strong></p>
<p> Setting up Habitat will interactively ask questions to initialize <code>~/.hab</code>.</p>
<p> This command must be run once per user that will use <code>hab</code>:</p>
<pre><code class="lang-bash"> hab setup
</code></pre>
</li>
</ol>
<h2 id="clone-project-via-git">Clone Project via Git</h2>
<p>In this example, the <a href="https://github.com/SlateFoundation/slate-cbl" target="_blank">slate-cbl</a> project is cloned, but you might use any repository/branch containing an emergence project:</p>
<pre><code class="lang-bash">git <span class="hljs-built_in">clone</span> --recursive -b develop git@github.com:SlateFoundation/slate-cbl.git
</code></pre>
<p>The <code>--recursive</code> option is used so that any submodule repositories are also cloned.</p>
<h2 id="launch-studio-via-habitat">Launch Studio via Habitat</h2>
<ol>
<li><p>Change into project&apos;s cloned directory</p>
<pre><code class="lang-bash"> <span class="hljs-built_in">cd</span> ./slate-cbl
</code></pre>
</li>
<li><p>Launch Studio</p>
<p> On any system, launch a studio with:</p>
<pre><code class="lang-bash"> HAB_DOCKER_OPTS=<span class="hljs-string">&quot;-p 7080:80 -p 3306:3306 --name emergence-studio&quot;</span> \
     hab studio enter -D
</code></pre>
<p> The <code>HAB_DOCKER_OPTS</code> environment variable here allows you to use any options supported by <code>docker run</code>, in this case forwarding ports for the web server and MySQL server from inside the container to your host machine.</p>
<p> Review the notes printed to your terminal at the end of the studio startup process for a list of additional commands provided by your project&apos;s <code>.studiorc</code></p>
</li>
</ol>
<h2 id="start-runtime-and-build-site">Start Runtime and Build Site</h2>
<ol>
<li><p>Start environment services</p>
<p> Use the studio command <code>start-all</code> to launch the http server (nginx), the application runtime (php-fpm), and a local mysql server:</p>
<pre><code class="lang-bash"> start-all
</code></pre>
<p> At this point, you should be able to open <a href="http://localhost:7080" target="_blank">localhost:7080</a> and see the error message <code>Page not found</code>.</p>
</li>
<li><p>Build environment</p>
<p> To build the entire environment and load it, use the studio command <code>update-site</code>:</p>
<pre><code class="lang-bash"> update-site
</code></pre>
<p> At this point, <a href="http://localhost:7080" target="_blank">localhost:7080</a> should display the current build of the site</p>
</li>
</ol>
<h2 id="load-fixture-data-optional">Load Fixture Data (optional)</h2>
<pre><code class="lang-bash"><span class="hljs-comment"># clone fixture branch into git-ignored .data/ directory</span>
git <span class="hljs-built_in">clone</span> -b cbl/competencies https://github.com/SlateFoundation/slate-fixtures.git .data/fixtures

<span class="hljs-comment"># load all .sql files from fixture</span>
cat .data/fixtures/*.sql | load-sql -
</code></pre>
<h2 id="create-user-account-optional">Create User Account (optional)</h2>
<ol>
<li><p>Enable user registration form (optional)</p>
<p> If your project has registration disabled by default, you might want to enable it so you can register:</p>
<pre><code class="lang-bash"> <span class="hljs-comment"># write class configuring enabling registration</span>
 mkdir -p php-config/Emergence/People
 <span class="hljs-built_in">echo</span> <span class="hljs-string">&apos;&lt;?php Emergence\People\RegistrationRequestHandler::$enableRegistration = true;&apos;</span> &gt; php-config/Emergence/People/RegistrationRequestHandler.config.php

 <span class="hljs-comment"># rebuild environment</span>
 update-site
</code></pre>
</li>
<li><p>Promote registered user to developer (optional)</p>
<p> After visiting <a href="http://localhost:7080/register" target="_blank"><code>/register</code></a> and creating a new user account, you can use the studio command <code>promote-user</code> to upgrade the user account you just registered to the highest access level:</p>
<pre><code class="lang-bash"> promote-user &lt;myuser&gt;
</code></pre>
</li>
</ol>
<p>After editing code in the working tree, run the studio command <code>update-site</code> to rebuild and update the environment. A <code>watch-site</code> command is also available to automatically rebuild and update the environment as changes are made to the working tree.</p>
<h2 id="running-tests">Running Tests</h2>
<p><a href="https://www.cypress.io/" target="_blank">Cypress</a> is used to provide browser-level full-stack testing. The <code>package.json</code> file at the root of the repository specifies the dependencies for running the test suite and all the configuration/tests for Cypress are container in the <code>cypress/</code> tree at the root of the repository.</p>
<p>To get started, from a terminal <strong>outside the studio</strong> in the root of the repository:</p>
<pre><code class="lang-bash"><span class="hljs-comment"># install development tooling locally</span>
npm install

<span class="hljs-comment"># launch cypress app</span>
npm run cypress:open
</code></pre>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Getting Started","level":"1.2.1","depth":2,"next":{"title":"Deployment","level":"1.3","depth":1,"ref":"","articles":[{"title":"Deploy a Site with Chef Habitat","level":"1.3.1","depth":2,"path":"deployment/habitat.md","ref":"deployment/habitat.md","articles":[]},{"title":"Deploy a Site with Docker","level":"1.3.2","depth":2,"path":"deployment/docker.md","ref":"deployment/docker.md","articles":[]}]},"previous":{"title":"Development","level":"1.2","depth":1,"ref":"","articles":[{"title":"Getting Started","level":"1.2.1","depth":2,"path":"development/getting_started.md","ref":"development/getting_started.md","articles":[]}]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":[],"pluginsConfig":{"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"development/getting_started.md","mtime":"2019-12-09T01:41:11.227Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2019-12-09T01:41:13.367Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

