
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
        <link rel="canonical" href="http://emergenceplatform.github.io/book/development/studio/">
      
      
      <link rel="shortcut icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-6.0.2">
    
    
      
        <title>Development: Using Studio - Emergence</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.38780c08.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.3f72e892.min.css">
        
          
          
          <meta name="theme-color" content="#ffa724">
        
      
    
    
    
      
        
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
      <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.13.0/css/all.css">
    
    
      
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="orange" data-md-color-accent="red">
      
  
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#development-using-studio" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href="http://emergenceplatform.github.io/book/" title="Emergence" class="md-header-nav__button md-logo" aria-label="Emergence">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            Emergence
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              Development: Using Studio
            
          </span>
        </div>
      
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active">
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header-nav__source">
        
<a href="https://github.com/EmergencePlatform/book/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          

  

<nav class="md-tabs md-tabs--active" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  <li class="md-tabs__item">
    
      <a href="../.." class="md-tabs__link">
        Introduction
      </a>
    
  </li>

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../console-command/" class="md-tabs__link md-tabs__link--active">
          Development
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../deployment/docker/" class="md-tabs__link">
          Deployment
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../guides/creating-a-dynamic-page/" class="md-tabs__link">
          Guides
        </a>
      
    </li>
  

      
        
      
    </ul>
  </div>
</nav>
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="http://emergenceplatform.github.io/book/" title="Emergence" class="md-nav__button md-logo" aria-label="Emergence">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    Emergence
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/EmergencePlatform/book/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." class="md-nav__link">
      Introduction
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2" checked>
    
    <label class="md-nav__link" for="nav-2">
      Development
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Development" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        <span class="md-nav__icon md-icon"></span>
        Development
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../console-command/" class="md-nav__link">
      Development: Build a Console Command
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../getting_started/" class="md-nav__link">
      Getting Started with Development
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../site-specific-service/" class="md-nav__link">
      Development: Build a Site-specific Service
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Development: Using Studio
        <span class="md-nav__icon md-icon"></span>
      </label>
    
    <a href="./" class="md-nav__link md-nav__link--active">
      Development: Using Studio
    </a>
    
      
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#in-this-article" class="md-nav__link">
    In this article
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    Introduction
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    Prerequisites
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#add-studiorc-to-repository" class="md-nav__link">
    Add .studiorc to Repository
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#enter-studio" class="md-nav__link">
    Enter Studio
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#load-a-database-service" class="md-nav__link">
    Load a Database Service
  </a>
  
    <nav class="md-nav" aria-label="Load a Database Service">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#use-coremysql-to-run-a-local-database" class="md-nav__link">
    Use core/mysql to run a local database
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#use-jarvusmysql-remote-to-connect-a-remote-database" class="md-nav__link">
    Use jarvus/mysql-remote to connect a remote database
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#load-a-runtime-service" class="md-nav__link">
    Load a Runtime Service
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#load-an-http-service" class="md-nav__link">
    Load an HTTP Service
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#studio-commands-reference" class="md-nav__link">
    Studio Commands Reference
  </a>
  
    <nav class="md-nav" aria-label="Studio Commands Reference">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#runtime" class="md-nav__link">
    Runtime
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#database" class="md-nav__link">
    Database
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
    
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      Deployment
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Deployment" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        <span class="md-nav__icon md-icon"></span>
        Deployment
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../deployment/docker/" class="md-nav__link">
      Deploy a Site with Docker
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../deployment/habitat/" class="md-nav__link">
      Deploy a Site with Chef Habitat
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../deployment/restic/" class="md-nav__link">
      Set up Backups with Restic
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      Guides
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Guides" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        <span class="md-nav__icon md-icon"></span>
        Guides
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../guides/creating-a-dynamic-page/" class="md-nav__link">
      Creating a Dynamic Page
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../guides/make-a-model-searchable-by-tags/" class="md-nav__link">
      Make a Model Searchable by Tags
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../guides/migrate-site-to-holobranch/" class="md-nav__link">
      Migrate a Site to a Holobranch
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../guides/migrations/" class="md-nav__link">
      Migrations
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../guides/sending-email/" class="md-nav__link">
      Sending Email
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../guides/skeletons-from-scratch/" class="md-nav__link">
      Bootstrap a Site from Git
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../guides/translating-sites/" class="md-nav__link">
      Localization
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../SUMMARY/" class="md-nav__link">
      Table of contents
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#in-this-article" class="md-nav__link">
    In this article
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    Introduction
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    Prerequisites
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#add-studiorc-to-repository" class="md-nav__link">
    Add .studiorc to Repository
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#enter-studio" class="md-nav__link">
    Enter Studio
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#load-a-database-service" class="md-nav__link">
    Load a Database Service
  </a>
  
    <nav class="md-nav" aria-label="Load a Database Service">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#use-coremysql-to-run-a-local-database" class="md-nav__link">
    Use core/mysql to run a local database
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#use-jarvusmysql-remote-to-connect-a-remote-database" class="md-nav__link">
    Use jarvus/mysql-remote to connect a remote database
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#load-a-runtime-service" class="md-nav__link">
    Load a Runtime Service
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#load-an-http-service" class="md-nav__link">
    Load an HTTP Service
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#studio-commands-reference" class="md-nav__link">
    Studio Commands Reference
  </a>
  
    <nav class="md-nav" aria-label="Studio Commands Reference">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#runtime" class="md-nav__link">
    Runtime
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#database" class="md-nav__link">
    Database
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/EmergencePlatform/book/edit/master/docs/development/studio.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                <h1 id="development-using-studio">Development: Using Studio<a class="headerlink" href="#development-using-studio" title="Permanent link"> ¶</a></h1>
<p>This guide shows you how to set up a local Studio environment for interactively developing your site.</p>
<h2 id="in-this-article">In this article<a class="headerlink" href="#in-this-article" title="Permanent link"> ¶</a></h2>
<ul>
<li><a href="#introduction">Introduction</a></li>
<li><a href="#prerequisites">Prerequisites</a></li>
<li><a href="#add-studiorc-to-repository">Add <code>.studiorc</code> to Repository</a></li>
<li><a href="#enter-studio">Enter Studio</a></li>
<li><a href="#load-a-database-service">Load a Database Service</a></li>
<li><a href="#load-a-runtime-service">Load a Runtime Service</a></li>
<li><a href="#load-an-http-service">Load an HTTP Service</a></li>
<li><a href="#studio-commands-reference">Studio Commands Reference</a></li>
</ul>
<h2 id="introduction">Introduction<a class="headerlink" href="#introduction" title="Permanent link"> ¶</a></h2>
<p><a href="https://github.com/EmergencePlatform/studio/">Emergence Studio</a> uses <a href="https://www.habitat.sh/docs/developing-packages/#plan-builds">Chef Habitat Studio</a> to provide an isolated, disposable, and interactive command-line environment for working on your site.</p>
<p>In this and other guides, we will focus on running Linux-like Studio environments contained by Docker, as that provides the most consistent developer experience across platforms. On Linux machines, Chef Habitat <a href="https://www.habitat.sh/docs/developing-packages/#managing-the-studio-type-docker-linux-windows">also can provide a chroot-contained Studio type</a> that is faster, smaller, persistent by default, and exposes all network ports. Chroot studios offer lower overhead in CI and controlled environments, and will work just as well with Emergence Studio, but require more awareness of what else is in the environment to avoid conflicts.</p>
<h2 id="prerequisites">Prerequisites<a class="headerlink" href="#prerequisites" title="Permanent link"> ¶</a></h2>
<ul>
<li>Complete the <a href="../getting_started/#prerequisites">prerequisites covered in Development: Getting Started</a></li>
</ul>
<h2 id="add-studiorc-to-repository">Add <code>.studiorc</code> to Repository<a class="headerlink" href="#add-studiorc-to-repository" title="Permanent link"> ¶</a></h2>
<p>While entering a Chef Habitat Studio, any <code>.studiorc</code> script present in the root of the directory where the <code>hab studio enter</code> command is run will be sourced and executed automatically during the Studio&rsquo;s initialization, before the interactive command line is presented.</p>
<p>Use this <code>.studiorc</code> template as a starting point in the root of any emergence site project:</p>
<div class="highlight"><pre><span></span><code><span class="ch">#!/bin/bash</span>
hab pkg install emergence/studio
<span class="nb">source</span> <span class="s2">&quot;</span><span class="k">$(</span>hab pkg path emergence/studio<span class="k">)</span><span class="s2">/studio.sh&quot;</span>
</code></pre></div>
<p>This script installs and loads the Emergence Studio environment and commands. You may add any additional code here to extend the studio environment for your project.</p>
<h2 id="enter-studio">Enter Studio<a class="headerlink" href="#enter-studio" title="Permanent link"> ¶</a></h2>
<div class="highlight"><pre><span></span><code><span class="c1"># start from the root of your project repository</span>
<span class="nb">cd</span> /path/to/my-repo/

<span class="c1"># use your chosen/registered origin name</span>
<span class="nb">export</span> <span class="nv">HAB_ORIGIN</span><span class="o">=</span><span class="s2">&quot;myorigin&quot;</span>

<span class="c1"># pass options to Docker to open ports, persist mysql data, name container</span>
<span class="nb">export</span> <span class="nv">HAB_DOCKER_OPTS</span><span class="o">=</span><span class="s2">&quot;</span>
<span class="s2">    -p 7080:80</span>
<span class="s2">    -p 7043:443</span>
<span class="s2">    -p 7036:3306</span>
<span class="s2">    -p 7099:19999</span>
<span class="s2">    -v mysite-mysql-data:/hab/svc/mysql/data</span>
<span class="s2">    --name mysite-studio</span>
<span class="s2">&quot;</span>

<span class="c1"># launch and enter interactive Habitat studio, forcing Docker mode</span>
hab studio enter -D
</code></pre></div>
<h2 id="load-a-database-service">Load a Database Service<a class="headerlink" href="#load-a-database-service" title="Permanent link"> ¶</a></h2>
<p>Start a database service before any other. Your runtime service instance can have its <code>database</code> slot bound to an instance of <code>core/mysql</code>, <code>jarvus/mysql-remote</code>, or any other Chef Habitat service with compatible config exposure leading to a MySQL server connection.</p>
<p>Any approach must export <code>$DB_SERVICE</code> and <code>$DB_DATABASE</code> into your studio environment.</p>
<h3 id="use-coremysql-to-run-a-local-database">Use <code>core/mysql</code> to run a local database<a class="headerlink" href="#use-coremysql-to-run-a-local-database" title="Permanent link"> ¶</a></h3>
<div class="highlight"><pre><span></span><code>start-mysql
</code></pre></div>
<p>That&rsquo;s it! A local MySQL instance will be set up using <a href="https://github.com/habitat-sh/core-plans/tree/master/mysql"><code>core/mysql</code></a> with persistent data stored under <code>/hab/svc/mysql/data</code>. The example <code>HAB_DOCKER_OPTS</code> above includes mounting this path to a named volume and exposing the MySQL port to your host machine on <code>7036</code>.</p>
<p>Use <code>hab svc status</code> and <code>sup-log</code> to verify the database service is up and running without any errors. If you see any permission denied errors under <code>sup-log</code>, that likely indicates the volume mounted at <code>/hab/svc/mysql/data</code> did not initialize with permissions adequate for the MySQL service to write there, and can be fixed for the lifetime of that volume by running <code>chown hab:hab -R /hab/svc/mysql/data</code></p>
<h3 id="use-jarvusmysql-remote-to-connect-a-remote-database">Use <code>jarvus/mysql-remote</code> to connect a remote database<a class="headerlink" href="#use-jarvusmysql-remote-to-connect-a-remote-database" title="Permanent link"> ¶</a></h3>
<div class="highlight"><pre><span></span><code>start-mysql-remote <span class="s2">&quot;mydatabasename&quot;</span>
</code></pre></div>
<p>This studio command will launch an editor to populate <code>/hab/user/mysql-remote/config/user.toml</code> with connection details and then load a <a href="https://github.com/JarvusInnovations/habitat-plans/tree/master/mysql-remote"><code>jarvus/mysql-remote</code></a> service instance.</p>
<h2 id="load-a-runtime-service">Load a Runtime Service<a class="headerlink" href="#load-a-runtime-service" title="Permanent link"> ¶</a></h2>
<p>With a database service successfully loaded, you can load a runtime service. The runtime service provides the PHP worker pool and loads your site code into it.</p>
<div class="highlight"><pre><span></span><code>start-runtime
</code></pre></div>
<p>This studio command will load an instance of the generic <a href="https://github.com/EmergencePlatform/php-runtime"><code>emergence/php-runtime</code></a> service that any site can be loaded into. The <code>$DB_SERVICE</code> environment variable exported when you ran one of the <code>start-mysql*</code> studio commands previously will be used to bind this runtime instance&rsquo;s <code>database</code> slot to your database instance.</p>
<p>The guide <a href="development/site-specific-service.md">Development: Build a Site-specific Service</a> covers how to build and use your own runtime service package that can extend and bundle your site into its own deployable artifact.</p>
<p>Any approach must export <code>$EMERGENCE_RUNTIME</code> into your studio environment.</p>
<h2 id="load-an-http-service">Load an HTTP Service<a class="headerlink" href="#load-an-http-service" title="Permanent link"> ¶</a></h2>
<p>Finally, with the database and runtime services successfully loaded, you can load an HTTP service to expose your application.</p>
<div class="highlight"><pre><span></span><code>start-http
</code></pre></div>
<p>This studio command will load an instance of the generic <a href="https://github.com/EmergencePlatform/habitat-plans/tree/master/nginx"><code>emergence/nginx</code></a> service. The <code>$EMERGENCE_RUNTIME</code> environment variable exported when you ran the <code>start-runtime</code> studio command previously will be used to bind this nginx instance&rsquo;s <code>backend</code> slot to your runtime instance.</p>
<p>The example <code>HAB_DOCKER_OPTS</code> above includes exposing nginx&rsquo;s HTTP and HTTPS ports to your host machine on <code>7080</code> and <code>7043</code> respectively.</p>
<h2 id="studio-commands-reference">Studio Commands Reference<a class="headerlink" href="#studio-commands-reference" title="Permanent link"> ¶</a></h2>
<h3 id="runtime">Runtime<a class="headerlink" href="#runtime" title="Permanent link"> ¶</a></h3>
<ul>
<li><code>update-site</code> — Projects your site tree with Hologit and loads it into the current runtime service instance<ul>
<li>Affected by <code>$EMERGENCE_REPO</code>, <code>$EMERGENCE_HOLOBRANCH</code>, and <code>$EMERGENCE_FETCH</code> environment variables</li>
</ul>
</li>
<li><code>watch-site</code> — Like <code>update-site</code>, but runs until terminated, watching for file changes and re-updating the site automatically</li>
<li><code>shell-runtime</code> — Opens an interactive <a href="https://psysh.org/">PsySH</a> shell under the same environment used by the currently-loaded runtime instance</li>
<li><code>switch-site /path/to/repository/</code> — Switches what site repository will be used next time you run <code>update-site</code> (the default is whichever <code>.studiorc</code> was loaded from)</li>
<li><code>console-run [command] &lt;args...&gt;</code> — Executes a script from the <code>console-commands/</code> site tree within the current runtime</li>
<li><code>enable-xdebug 192.168.1.1</code> — Enables using a remote Xdebug debugger at an IP/hostname reachable from inside the container</li>
<li><code>enable-runtime-update</code> — When using a site-specific runtime service, enables using <code>update-site</code> as you can with the generic <code>emergence/php-runtime</code> service (instead of using the site build bundled with the service).</li>
</ul>
<h3 id="database">Database<a class="headerlink" href="#database" title="Permanent link"> ¶</a></h3>
<ul>
<li><code>load-sql [-|file...|URL|site] [database]</code> — Load one or more .sql files into the current database instance</li>
<li><code>dump-sql [database] &gt; file.sql</code> — Dump the current database to SQL</li>
<li><code>reset-mysql</code> — Drop and recreate empty the current database</li>
<li><code>promote-user &lt;username&gt; [account_level]</code> — Promote a user in the database to a higher account level after registration</li>
<li><code>shell-mysql</code> — Open an interactive MySQL client shell under the currently-loaded database instance</li>
</ul>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid" aria-label="Footer">
        
          <a href="../site-specific-service/" class="md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
            </div>
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Development: Build a Site-specific Service
              </div>
            </div>
          </a>
        
        
          <a href="../../deployment/docker/" class="md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Deploy a Site with Docker
              </div>
            </div>
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/vendor.77e55a48.min.js"></script>
      <script src="../../assets/javascripts/bundle.9554a270.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}</script>
      
      <script>
        app = initialize({
          base: "../..",
          features: ['navigation.tabs'],
          search: Object.assign({
            worker: "../../assets/javascripts/worker/search.4ac00218.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
        <script src="https://unpkg.com/mermaid@8.5.0/dist/mermaid.min.js"></script>
      
    
  </body>
</html>